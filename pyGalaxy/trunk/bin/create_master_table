#! /usr/bin/env python

"""
This script produces the stacks for emission line luminosity limited samples.
"""
import glob
import os
from os.path import join
from InterpretSpectraStacks import *
stackList = n.array( glob.glob(join(os.environ['SPECTRASTACKS_DIR'], "data", "??_????", "??_????-*.fits")) )

path_to_output_table = join(os.environ['SPECTRASTACKS_DIR'], "results", "table_v0.data")

table = n.empty((len(stackList), 32))

for ii, tab in enumerate(table):
	obj = InterpretSpectraStacks(stackList[ii])
	arr, head = obj.get_table_entry()
	print arr
	tab[ii] = arr

n.savetxt(path_to_output_table, table.T, header = head)	


